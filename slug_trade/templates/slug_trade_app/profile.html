{% extends "slug_trade_app/base.html" %}
{% load staticfiles %}

{% block title_block %}
<title>{{user_to_view.first_name|title}}'s Profile</title>
{% endblock %}

{% block nav_block %}
    {% include "slug_trade_app/header-footer/navigation.html" %}
{% endblock %}


{% block body_block %}
<div class="profile-wrapper">
  <div class="profile-body">
    <div class="profile-info-wrapper">

      <div class="profile-info-image-wrapper">
        {% if user_to_view.userprofile.profile_picture %}
          <img src="{{user_to_view.userprofile.profile_picture.url}}" height="200">
        {% endif %}
      </div>

      <div class="profile-info-content-wrapper">
        <div class="profile-info-name-wrapper">
          <div class="profile-info-title">Name</div>
          <div class="profile-info-name">
            {{user_to_view.first_name|title}}
            {{user_to_view.last_name|title}}
          </div>
        </div>

        <div class="profile-info-location-wrapper">
          <div class="profile-info-location-title-wrapper">
            <div class="profile-info-title">Location</div>
            <div class="profile-info-location">
              {{user_to_view.userprofile.on_off_campus|title}}&nbsp;campus
            </div>
          </div>
        </div>

        <div class="profile-info-bio-wrapper">
          <div class="profile-info-bio-title-wrapper">
            <div class="profile-info-title">Bio</div>
            <div class="profile-info-bio">
              {{user_to_view.userprofile.bio}}
            </div>
          </div>
        </div>

        {% if not public %}
        <a href="{% url 'slug_trade_app:edit_profile' %}" style="text-decoration: none !important;">
          <div class="profile-edit-link">Edit Profile</div>
        </a>
        {% endif %}

      </div>
    </div>


    {% if show_add_button %}
      <form enctype="multipart/form-data" method="post">
      <div class="wishlist-wrapper">
        <h2>Wishlist</h2>
        <div class="wishlist-title-description">
          Items {{ user_to_view.first_name }} is interested in trading for.
        </div>
        <div class="wishlist-input-wrapper">

          {% csrf_token %}
          <input type="text" class="wishlist-input" id="wishlist_item_description" name="description" placeholder="Add Wishlist Item">
          <input id="wishlist-button" type="submit" name="add" value="Add">

        </div>
      </div>
      </form>
    {% endif %}


    <div class="wishlist-list-wrapper">
      {% if empty_wishlist %}
        {{user_to_view.first_name}}'s wishlist is empty
      {% else %}

          {% for item in wishlist %}
            <div class="wishlist-item-wrapper" id="wishlist_{{item.id}}">
              {{ item.wishlist_item_description }}
              {% if show_add_button %}
                <button class="delete_from_wishlist" id="delete-x" value="{{item.id}}" >x</button>
              {% endif %}
            </div>
          {% endfor %}

      {% endif %}
    </div>

      <div class="profile-closet-title-wrapper">

          <h2>Closet</h2>

          {% if not public %}
            <a href="{% url 'slug_trade_app:add_closet_item' %}">
              <div class="profile-add-item-link">Add Closet Item</div>
            </a>
          {% endif %}

      </div>



      {% if item_data %}
        <div class="closet-item-wrapper">

        {% for item, images in item_data %}

          <div class="item-wrapper">

            <div class="item-image-wrapper">
              <img src="{{images.0}}" width="300" alt="">
            </div>
            <div class="item-seller-wrapper">
              <div class="seller-title">CATEGORY: &nbsp;</div>
              <div class="seller-name">{{item.get_category_display|title}}</div>
            </div>
            <div class="item-title">{{item.name|title}}</div>
            <div class="item-price-wrapper">

              {% if item.get_trade_options_display == "Cash with items on top" %}
                <div class="item-type-title">Trade Only</div>
              {% else%}
                <div class="item-type-price">{{item.get_trade_options_display}}</div>
              {% endif %}

              {% if item.get_trade_options_display == "Cash Only" %}
                <div class="item-type-price">${{item.price}}</div>
              {% elif item.get_trade_options_display == "Trade Only" %}
                <div class="item-type-price">Make an Offer</div>
              {% elif item.get_trade_options_display == "Cash with items on top" %}
                <div class="item-type-price">Make an Offer</div>
              {% else %}
                <div class="item-type-price">Free</div>
              {% endif %}
            </div>
          </div>
        {% endfor %}
        {% endif %}
        </div>

  </div>
</div>

{% endblock %}

{% block footer_block %}
  {% include "slug_trade_app/header-footer/footer.html" %}
{% endblock %}
